          МЕТОДИКА  СОЗДАНИЯ  И  НАСТРОЙКИ   Э В М         

          С  ИСПОЛЬЗОВАНИЕМ  МИКРОПРОГРАММИРОВАНИЯ         



   Основной целью данной работы была  разработка  методики  и
инструментальных средств для  создания  универсальной  ЭВМ  с
применением  техники  микропрограммирования  и   практическая
реализация на их основе ЭВМ, совместимой на  пользовательском
командном уровне с машинами типа БЭСМ-6 и Эльбрус-Б.

   ЭВМ БЭСМ-6 промышленностью больше  не  выпускается,  и  во
многих   организациях   она   выводится   или   выведена   из
эксплуатации.   Архитектура   БЭСМ-6    сравнительно    легко
переводится  на  современную  технологическую  базу   больших
интегральных  схем  с  использованием  микропрограммирования.
Поэтому    аппаратная    эмуляция    БЭСМ-6    представлялась
экономически более  оправданной,  чем  переработка  огромного
объема оригинального программного обеспечения, созданного для
БЭСМ-6 за длительный период ее эксплуатации.

   Также ставилась цель создать  ЭВМ,  имеющую  аппаратные  и
программные средства для расширения набора микропрограмм. Это
позволит  вводить  в   машину   новые   команды,   специально
предназначенные  для  тех  или  иных  специфических   режимов
использования.

                           Рис.1                           



   В работе описан комплексный подход к разработке и  отладке
микропрограммного   обеспечения,   позволяющий   осуществлять
проектирование и создание ЭВМ малыми группами  с  минимальным
количеством промежуточных макетных образцов.

   Предложено новое решение актуальной проблемы:  разработана
вычислительная  система,  открытая  к   наращиванию   системы
команд, т.е. адаптации к конкретному классу  задач.  Наиболее
важные характеристики системы приведены на  рис.  Система  не
только способна работать в базовом режиме и  режиме  эмуляции
БЭСМ-6, но и комбинировать эти режимы в рамках одной  задачи.
Особенностью  двух  режимов  работы  является   их   взаимное
"проникновение", когда программы  БЭСМ-6  могут  считаться  с
повышенной точностью другого режима.

   Обеспечен единообразный подход как к разработке, так  и  к
расширению возможностей ЭВМ с одновременным  изготовлением  и
коррекцией документов.




   Созданная   методика   разработки   ЭВМ   может    успешно
использоваться при создании новых  специализированных  ЭВМ  и
другой цифровой аппаратуры.

   С применением  этой  методики  разработана  ЭВМ  МКБ-8601.
Малые  геометрические  размеры  МКБ   открывают   возможности
использования ее не только  как  вычислителя,  например,  для
обработки  результатов  физических  экспериментов,  но  и   в
системах  на  линии  с  экспериментальным  и  технологическим
оборудованием. Более того, наличие аппаратно-микропрограммной
поддержки мультипрограммирования  позволяет  использовать  ее
одновременно в обоих этих качествах.

   Разработанное    микропрограммное     обеспечение     дает
возможность использовать МКБ в качестве эмулятора ЭВМ БЭСМ-6,
а также в  качестве  программно  совместимой  младшей  модели
вычислительной системы ЭЛЬБРУС-Б.

   Научные  результаты  диссертации   подтверждены   успешным
завершением   проекта,   изготовлением   макетного    образца
МКБ-8601,  корректной  работой  новых  программ  и  программ,
перенесенных с БЭСМ-6.

                         П А У З А                         

                           рис.2                           



   В любой ЭВМ самым сложным является устройство  управления,
которое   организует   работу    операционного    устройства,
содержащего технические средства  для  хранения,  передачи  и
преобразования   информации.   Для    упрощения    устройства
управления и представления его в  виде  регулярной  структуры
был предложен метод микропрограммирования.

   На  рис.  показана  общая  схема  ЭВМ  с  микропрограммным
управлением.

   Микропрограммирование тесно связано с понятием архитектуры
ЭВМ. В отличие от понятия структуры, связанного с  внутренней
организацией  и  функциями  аппаратуры,  архитектура  -   это
представление    ЭВМ    с    точки    зрения    программиста,
разрабатывающего  программы  на  машинно  -   ориентированном
языке.  В  ЭВМ  с   микропрограммным   принципом   управления
микропрограммирование    является    средством    обеспечения
архитектуры ЭВМ, т.к.  оно  реализует  правила  интерпретации
программы:  систему  команд,  форму   представления   данных,

способы адресации и т.д.

   Микропрограммирование  позволяет  отделить  требования   к
машине со стороны  программиста-пользователя  от  технической
реализации машины. Составляя необходимый набор микропрограмм,
можно придать имеющейся  вычислительной  машине  почти  любые
архитектурные свойства.



                           Рис.3                           



   В качестве  примера  можно  привести  работы  по  созданию
специализированного РЕФАЛ - процессора ЕС2702, основанного на
микропрограммной реализации языка РЕФАЛ, что позволяет в 8-10
раз повысить  скорость  обработки  символьной  информации  по
сравнению  со  скоростью  работы  программной  РЕФАЛ-системы,
работающей  на  сопоставимой  аппаратуре  (ЕС1035).  В   ОИЯИ
разработан    микропрограммный    ФОРТРАН    -     процессор,
предназначенный для использования в системах сбора информации
с экспериментальных установок.

   Области применения микропрограммирования приведены на рис.



                           Рис.4                           



   Предлагаемая методика создания и настройки архитектуры ЭВМ
с  использованием  микропрограммирования  включает  следующие
этапы:

   1. определение архитектуры создаваемой ЭВМ и  проверка  ее
эффективности с помощью программного имитатора;

   2. проверка возможности реализации заданной архитектуры на
логической модели;

   3. создание   комплекса   микропрограммных   средств   для
заданной архитектуры;

   4. модификация микропрограммного обеспечения  для  решения
конкретных задач, в частности - для эмуляции БЭСМ-6.



   Весь   комплекс   инструментальных   программно-аппаратных
средств проекта МКБ приведен на рис.



                           рис.5                          



   В ходе проектирования МКБ для  изучения  эффективности  ее

архитектуры  был  создан  программный  имитатор,  в   котором
моделируется архитектура МКБ для одного  процесса:  регистры,
способы представления данных  и  способы  адресации,  система
команд и все прерывания, возникающие при работе процесса.

   Поскольку одна из основных  задач  при  разработке  МКБ  -
эмуляция БЭСМ-6, для эффективного ее решения архитектура  МКБ
должна   соответствовать   архитектуре   БЭСМ-6:   страничная
организация  памяти,  набор  регистров   режима   математика,
способы  адресации  и  т.д.  Поэтому  с   помощью   имитатора
подбирались  система   команд   базового   режима,   наиболее
подходящая  для  функционирования  операционной   системы   и
прикладных программ, и форматы данных.



   Следующим  этапом  разработки  ЭВМ   является   логическое
моделирование.

   Моделирование позволяет, во-первых, проверить  возможность
реализации заданной архитектуры в виде программной модели  на
конкретной технологической базе цифровых интегральных схем  и
обнаружить  логические  ошибки  в  схемах  до  их   реального
воплощения в аппаратуре.  Во-вторых,  моделирование  помогает
лучше   понять   структуру   проектируемого   устройства    и
взаимодействие   отдельных   его    функциональных    блоков.
В-третьих,   описание   на   формальном   языке   логического
моделирования представляет  из  себя  документацию,  понятную
широкому кругу специалистов.

   В  процессе  моделирования  были  решены   задачи   выбора
структуры  микрокомандного  слова  и  проверки   правильности
функционирования системы в целом.



                         П А У З А                         

                           рис.6                           



   МКБ-8601  является  микропрограммно  управляемой   машиной
общего назначения с модульной организацией 

   Основными модулями, входящими в состав  машины,  являются:
оперативное запоминающее  устройство,  центральный  процессор
(их  может  быть  несколько),  пультовой  процессор,  внешние
устройства. Обмен информацией между ними осуществляется через
общую шину данных.

   Если рассматривать организацию ЭВМ как многоуровневую,  то

организация микропрограммного уровня определяется аппаратными
средствами,  а  набор  команд  и  организация   традиционного
машинного уровня - микропрограммными.



                           рис.7                           



   Общий  формат  данных  и   формат   команд   традиционного
машинного уровня МКБ имеет вид, представленный на рис. В  МКБ
устранены основные недостатки БЭСМ-6: малый порядок  чисел  с
плавающей    запятой,    недостаточный    размер    адресного
пространства, а  также  увеличена  длина  слова,  разрядность
индекс-регистров и др.



                           рис.8                           



   На рис. показана организация микропрограммного уровня  МКБ
с  двумя   внутренними   информационными   шинами,   которая,
обеспечивая необходимую  свободу  и  гибкость  в  управлении,
является в то же время достаточно простой.



   Микропрограмма  управляет  всеми  компонентами  ЦП  уровня
микромашины. Большое число разрядов  в  микрокомандном  слове
связано   с   необходимостью   управления   большим    числом
одновременно работающих функциональных  блоков.  Общее  число
сигналов, находящихся под управлением  микропрограммы,  около
300.  Однако  в  действительности  не  все  они  используются
одновременно. Оптимизация структуры микропрограммного  уровня
заключается в минимизации количества разрядов в  микрокоманде
при сохранении параллельности работы функциональных блоков.



                           рис.9.                          



   Весь  комплекс   микропрограммных   средств   состоит   из
отдельных микропрограмм  и  обеспечивает  выполнение  команд,
вызов  системных  макрокоманд  -  экстракодов   и   поддержку
прерываний.  Основной  цикл  "выборка  команд  -  исполнение"
МКБ показан на рис.



   В  МКБ  введена  дополнительно  группа  команд   поддержки
системных и прикладных программ: добавлены команды  работы  с

частями слова, команда перехода к  подпрограмме  и  возврата,
команды  семафорного  чтения  и  записи   для   аппаратно   -
микропрограммной  поддержки  многопроцессорной   конфигурации
машины,  работающей  на   общей   памяти.   Благодаря   этому
эффективность  системы  команд  МКБ  по   некоторым   оценкам
возросла в 2-3 раза.

   Все прерывания МКБ в зависимости от способа  их  обработки
делятся на внешние, внутренние  и  псевдопрерывания.
   Обработка псевдопрерываний происходит на  микропрограммном
уровне.  В  эту  группу  входит  прерывание   для   пересчета
приоритетов страниц,  используемое  для  поддержки  процедуры
управления  памятью.  Идея  алгоритма  пересчета  приоритетов
страниц аналогична существовавшему на БЭСМ-6, но  реализована
микропрограммно   с   аппаратной   поддержкой,    что    дает
значительный выигрыш во времени.

   Обработка внешних и внутренних  прерываний  происходит  на
уровне  операционной  системы.  При   этом   главная   задача
микропрограммы, начинающей работать от прерывания - сохранить
состояние прерванного процесса и передать управление процессу
обработки  прерывания.



   Один из режимов работы МКБ есть режим эмуляции  БЭСМ-6,  к
главным особенностям которого можно отнести следующее:

   1)однотипный способ распределения памяти как в МКБ, так  и
в БЭСМ-6, с точностью до размера адресного пространства;

   2)регистры и режимы работы, доступные программе  в  режиме
математика, в МКБ те же, что и в БЭСМ-6;

   3)добавлено   46   специальных    команд,    реализованных
микропрограммно, для прямой эмуляции команд БЭСМ-6.

   Количество  специальной  аппаратуры  для  режима  эмуляции
БЭСМ-6 очень незначительно и  сводится  в  основном  к  схеме
выделения адреса  и  кода  операции  команды.  Все  остальное
реализуется микропрограммно.

   Смена режима осуществляется  привилегированными  командами
под управлением  ОС.  При  выборке  операнда  или  команды  с
разными значениями режима происходит  внутреннее  прерывание,
если  оно  не  заблокировано.  Таким  образом  осуществляется
независимость  этих  друх  режимов  работы  и  их  смена  под
управлением ОС с  возможностю  работы  программ  в  смешанном
режиме.


                           рис.11                          



   Представление чисел с плавающей запятой в режиме  эмуляции
дает возможнсть:

   а)производить арифметические операции по одним  и  тем  же
микропрограммам как в базовом режиме, так и в режиме эмуляции
БЭСМ-6;

   б)расширять  диапазон  порядков  и  увеличивать   точность
вычислений в режиме эмуляции.



   Эльбрус-Б и МКБ  являются  БЭСМ-подобными  машинами.  Хотя
техническое исполнение их  совершенно  различное,  на  уровне
пользователя у них много общего. Поэтому  реализация  системы
команд  Эльбрус-Б  в  основном  не  представляет   сложности.
Некоторые команды при необходимости могут  интерпретироваться
экстракодами.



   Вычислительные возможности МКБ и  способность  работать  в
мультипрограммном режиме позволяют создавать  системы  на  ее
основе   одновременно   для    съема    и    для    обработки
экспериментальных результатов. Программы съема могут работать
от  прерываний,   сигнализирующих   о   наличии   информации.
Программы обработки могут работать  в  оставшееся  время  как
фоновые задачи.



   Для наладки и  эксплуатации  любой  вычислительной  машины
необходима эффективная система тестирования.

   Микропрограммные  тесты  имеют   ряд   преимуществ   перед
программными:

   1)они   имеют   большую   "разрешающую   способность"    в
обнаружении и локализации неисправностей.

   2)для их функционирования  требуется  гораздо  меньшее  по
объему аппаратурное ядро системы, чем  в  случае  программной
диагностики.

   Для   наладки   и   эксплуатации   МКБ   создан   комплекс
микропрограммных    тестов,    построенный    по     принципу
"расширяющегося ядра". Тесты проверяют работоспособность всех
функциональных узлов центрального  процессора,  кэш-память  и
оперативную память машины.




   Типы   микроопераций,   выполняемые   в    каждом    такте
микропрограммы,  различные  и  требуют  разного  времени  для
своего исполнения. В микропрограммном слове МКБ предусмотрено
поле, задающее длительность микропрограммного такта.

   На максимальной  длительности  такта  скорость  исполнения
логических  команд  макетного  образца  МКБ  около  200  тыс.
операций в секунду. После проведения процедуры подбора  длины
такта скорость исполнения логических команд увеличивается  от
12% до 18%. (В логических командах  основное  время  занимает
выборка операнда, которая от длины такта не зависит.)



                           табл.                           



   Скорость  исполнения   команд   в   микропрограммных   ЭВМ
невысока. Эффективность микропрограммирования  заключается  в
настройке микропрограммного  уровня  для  конкретной  задачи.
Получаемый выигрыш зависит от  числа  параллельно  работающих
логических схем, выполняющих операции в одном машинном цикле.
Дополнительная экономия получается  в  результате  устранения
обращений к памяти для записи промежуточных результатов и  за
командами. Использование микропрограммирования существенно не
улучшает внутренние циклы математических программ  с  большим
числом  арифметических  операций.  Наиболее  эффективно   оно
проявляется  в  программах  с   большим   числом   логических
операций, в таких, например, как обработка списков.

   Таблица показывает результат целенаправленных действий  по
организации  микропрограммной  поддержки  важнейших   функций
операционной системы. Так, смена процесса в ЦП, требовавшая в
диспетчере  ОС  "Дубна"  116  команд,   в   МКБ   исполняется
микропрограммой из 156 микрокоманд, т.е. около 15 "команд"  в
привычном "командном"  исчислении.  При  достигнутом  среднем
соотношении быстродействия 4:1 ряд системных  функций  в  МКБ
выполняется даже быстрее, чем в БЭСМ-6.




              Заключение. Основные результаты.             

   1.Разработана методика создания и настройки  универсальной
ЭВМ с использованием микропрограммирования.

   2.На основании этой методики была  создана  ЭВМ  МКБ-8601,
которая кроме базового режима с  расширенным  списком  команд
может работать в  системе  команд  БЭСМ-6  и  эксплуатировать
практически весь комплекс ее  программ.  Возможно  совмещение
базового режима и режима БЭСМ-6 в пределах одной программы.

   При этом:

      - создана программа-имитатор,  которая  является  также
   частью кросс-системы подготовки программ;

      -    проведено    логическое     моделирование     всех
   функциональных узлов ЦП МКБ-8601;

      -   разработан   микропрограммный   уровень   МКБ   для
   реализации системы команд, экстракодов и прерываний;

      - создан комплекс микропрограммных тестов, позволяющий
   проверить все функциональные блоки разработанной ЭВМ.

   Вклад автора в эти работы является определяющим.

   3.Разработанная    ЭВМ     имеет     структуру,     хорошо
приспособленную для решения вычислительных задач. Ее  система
команд совместима с вычислительной системой Эльбрус-Б.

   4.Обеспечены аппаратные и программные средства  увеличения
набора  микропрограмм  для  расширения  возможностей  ЭВМ   в
соответствии со спецификой определенного класса задач.

   5.Обработка   прерываний   на   микропрограммном    уровне
позволяет обеспечить быструю реакцию при работе ЭВМ на  линии
с экспериментальным и технологическим оборудованием.

   6.Для режима эмуляции БЭСМ-6  микропрограммно  реализована
арифметика  с  плавающей   запятой,   позволяющая   проводить
вычисления с большей  точностью  и  в  расширенном  диапазоне
порядков.

   7.Реализована  аппаратно  -   микропрограммная   поддержка
многопроцессорного режима работы с помощью семафорных  команд
и мультипрограммного  режима  с  использованием  регистрового
пула, обеспечивающая быстрое переключение процессов.

   8.Впервые на микропрограммном уровне реализован  созданный
в ОИЯИ алгоритм пересчета приоритетов страниц  для  поддержки
управления памятью.

   9.Для    заводского    изготовления    ЭВМ    подготовлена
документация и передана в НПО "Радиоприбор", г.Москва.






                           ОТВЕТЫ                          

1) Имитатор, "Пульс"

2) 

3) а) К каждой  программе  -  свой  подход.  Но  ОС  работает
      всегда, а прикладные программы - только во время своего
      счета.

   б)

   в)




                   Заключительное слово.                   

   Выражаю  свою  признательность  дирекции  Лаборатории   за
создание творческой, деловой атмосферы.

   Благодарю    уважаемых    оппонентов,    А.Н.Томилина    и
М.И.Гуревича, взявших на себя труд по чтению диссертации и ее
критическому анализу.

   Я признательна своим научным  руководитеям,  И.Н.Силину  и
Ф.В.Левчановскому за постоянное внимание и ценные  советы  на
всех этапах работы над диссертацией.

   Я  благодарю  В.П.Ширикова  за  поддержку  и  внимательное
отношение к моей работе.

   Хочется поблагодарить сотрудников лаборатории И.А.Емелина,
А.П.Сапожникова, В.М.Кадыкова, М.Ю.Попова и других коллег  по
работе за совместную работу и полезные обсуждения.

     Считаю своим долгом  поблагодарить  слаженный  коллектив
инженеров и операторов БЭСМ-6.

     Благодарю  членов  Совета  и  всех   присутствующих   за
внимание.






   Наиболее важные характеристики системы:

   а) простой способ внесения  изменений  в  систему  для  ее
специализации;

   б) обработка на микропрограммном уровне ряда прерываний;

   в)  возможность  вынесения  на  микропрограммный   уровень
специфических для некоторого класса задач действий;

   г) большое адресное  пространство,  52-разрядная  мантисса
числа  с  плавающей  запятой  и  наличие  целой   арифметики,
позволят легко программировать алгоритмы численного  анализа,
в том числе чувствительные к потере точности;

   д) совместимость с ЭВМ Эльбрус-Б;

   е) использование в одной задаче базового режима  и  режима
эмуляции  дает  возможность  при  разработке  новых  программ
включать хорошо проверенные пакеты программ БЭСМ-6;

   ж) система семафоров для работы машины в многопроцессорных
системах;

   з)  сравнительно  малые  стоимость  и  размеры   МКБ-8601,
позволяют использовать ее как рабочую станцию.








 МИКРОПРОГРАММНАЯ ЭВМ
┌───   ──────────   ───────────   ───────────   ────────────   ───────────┐
│                                                                         │
│                                                                         │
│             ЦЕНТРАЛЬНЫЙ ПРОЦЕССОР                                       │
│                                                                         │
│                                                                         │
│             ╔══   ═══════════   ═══════════   ═══════╗                  │
│             ║                                        ║               П  │
│             ║ УСТРОЙСТВО          ОПЕРАЦИОННОЕ       ║                  │
│             ║                                        ║               ЕУ │
│             ║ УПРАВЛЕНИЯ           УСТРОЙСТВО        ║                  │
│             ║                                        ║               РС │
│             ║             ┌──   ───────────   ──────┐║                  │
│┌──   ─────┐ ║┌─   ──────┐ │┌─   ──────┐ ┌──   ─────┐│║ ┌──   ─────┐  ИТ │
││          │ ║│    блок  │ ││          │ │          ││║ │          │     │
││   О З У: │ ║│          │ ││          │ │          ││║ │          │  ФР │
││          │ ║│    микро-│ ││          │ │          ││║ │ в   вод/ │     │
││          │ ║│          │ ││р   егист-│ │ а   ппа- ││║ │          │  ЕО │
││          ┌→║│п   рограм┌→││          ┌→│          ││║→│ в   ывод │→    │
││ п   рог- │ ║│          │ ││     ры,  │ │ра   тная ││║ │          │  РЙ │
││          │ ║│-   много │ ││          │ │          ││║ │          │     │
││ра   мма, │←║│          │←┐│п   амять │←┐          ││║←┐ к   онт- │←╴ИС │
││          │ ║│    управ-│ ││          │ │ло   гика ││║ │          │     │
││да   нные │ ║│          │ ││          │ │          ││║ │ро   ллеры│  ЙТ │
││          │ ║│    ления │ ││          │ │          ││║ │          │     │
│             ║             │                         │║               НВ │
│└──   ─────┘ ║└─   ──────┘ │└─   ──────┘ └──   ─────┘│║ └──   ─────┘     │
│             ║             └──   ───────────   ──────┘║               ЫА │
│             ║                                        ║                  │
│                                                                      Е  │
│             ╚══   ═══════════   ═══════════   ═══════╝                  │
│                                                                         │
│                                                                         │
└───   ──────────   ───────────   ───────────   ────────────   ───────────┘
                ЭВМ с микропрограммным управлением.





   Микропрограммирование применяется в следующих областях:

   1.Разработка устройств управления для  некоторой  заданной
архитектуры системы;

   2.Внесение  изменений  или   добавлений   в   существующую
архитектуру для адаптации к конкретному классу задач.

   3.Выполнение  функций   различных   уровней   программного
обеспечения (от операционных систем до прикладных программ).

   4.Эмуляция     некоторых     отсутствующих      аппаратных
возможностей.

   5.Использование в  "системах  с  непосредственной  связью"
(ON-LINE)  и  "системах,  работающих  в   реальном   масштабе
времени" (REAL-TIME).






   Предлагаемая методика создания и настройки архитектуры ЭВМ
с  использованием  микропрограммирования  включает  следующие
этапы:

   1. определение архитектуры создаваемой ЭВМ и  проверка  ее
эффективности с помощью программного имитатора;

   2. проверка возможности реализации заданной архитектуры на
логической модели;

   3.  создание  комплекса   микропрограммных   средств   для
заданной архитектуры;

   4. модификация микропрограммного обеспечения  для  решения
конкретных задач, в частности - для эмуляции ЭВМ БЭСМ-6.






                        ┌  ─────────────  ──┐   ┌───  ──────  ──────┐
                        │                   │   │                   │
                        │     "Пульс"       │   │                   │
                        │                   │   │  П  рограм  мный  │
                        │    логическое     │   │                   │
                        │                   │   │  и  митато  р МКБ │
                        │   моделировани  е │   │                   │
                                            │                       │
                        └  ───────┬─────  ──┘   └───  ────┬─  ──────┘
                                  │                       │
                            /40/  │                       │    /34/
                                  │                       │
                                  │                       │
┌──  ────────  ─────┐   ┌  ─────────────  ──┐   ┌───  ──────  ──────┐
│                   │   │                   │   │                   │
│                   │   │   Кросс-систем  а │   │ Кр  осс-си  стема │
│    Техничес  кое  │   │                   │   │                   │
│                   │   │    подготовки     │   │  п  одгото  вки   │
│ п  роектиро  вание│   │                   │   │                   │
│                   │   │   микропрограм  м │   │     програ  мм    │
                    │
└──  ─────┬──  ─────┘   └  ───────┬─────  ──┘   └───  ────┬─  ──────┘
          │                       │                       │
  /  76/  │                  /42/ │                       │   /36,37/
          │                       │                       │
          ╶──  ──────────  ──┐    │    ┌  ──────────  ────╴
                             │    │    │
                             │    │    │
                             │    │    │
                    ┌────  ─────────────  ──────┐
                    │                           │
                    │      Файловый серв  ер    │
                    │                           │
                    │   Б  ЭСМ-6 ╶─╴ IBM   PC   │
                    └────  ───────┬─────  ──────┘
                                  │
                                                           ┌  ───┐
                                  ↓                        │     │
                              ╔══════╗                     │     │
                              ║      ║                ┏━━━━━  ━━━━━━━━┓
                              ║      ║                ┃│││││  │││     ┃
                              ║IBM PC║                ┃│││││  │││     ┃
                              ║      ║                ┃│││││  │││     ┃
                                                      ┃│││││  │││     ┃
                     ┌───  ─────────────  ─────┐      ┃│││││  │││     ┃
                     │                         │      ┃│││││  │││     ┃
                     │ пу  льтовой проце  ссор ┌───→  ┃─────  ────────┃
                     │                         │      ┃               ┃
                     │      для  МКБ-860  1    │      ┃  МКБ  -8601   ┃
                     └───  ─────────────  ─────┘      ┗━━━━━  ━━━━━━━━┛
             Инструментальное обеспечение проекта МКБ-8601.





                            ┌───   ──────┐
                            │            │
                            │  О    З У  │
                            └───   ──────┘
                                   ↑
                                   │
                                   ↓
═══   ════════════   ═══════════   ════════════   ════════════   ═════⇒
           ОБЩАЯ Ш   ИНА  (АДРЕС   , ДАННЫЕ, УП   РАВЛЕНИЕ)
═══   ════════════   ═══════════   ════════════   ════════════   ═════⇒
      ↑              ↑             ↑               ↑             ↑
      │              │             │               │             │
      │
      ↓              ↓             ↓               ↓             ↓
┌──   ────┐    ┌──   ────┐    ┌─   ─────┐    ┌─   ─────┐    ┌─   ─────┐
│         │    │         │    │         │    │         │    │         │
│     ПП  │    │ Ц   П 1 │....│    ЦП N │    │К   ВУ 1 │....│К   ВУ 16│
└──   ────┘    └──   ────┘    └─   ─────┘    └─   ─────┘    └─   ─────┘
 ↑       ↑            ↑             ↑
 │.   ...│            │             │
 │       ╶────────   ─╴             │
 ╶─   ────────────   ───────────   ─╴
пос   ледовательны   е линии свя   зи
                   Модульная организация ЭВМ МКБ-8601.







     72 ... 65 64          .....................              1
    ┏━━  ━━━━━│━━━━━━━━━   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━  ━━━━┓
    ┃         │                                                ┃
а). ┃   тег   │              информационная часть              ┃
              │
    ┗━━ ━━━ ━━━━━━━━━━━━━━  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━  ━━━━┛
    64 63  .....   54  53 52         ..............           1
    ┏━ ━━━━━━━━━━━━━━━ ━━━━━━━━━━━━ ━━━━━━━━━━━━━━━━━━━━━  ━━━━┓
    ┃  │             │  │                                      ┃
       │
б). ┃  │   порядок   │  │          м а н т и с с а             ┃
    ┗━ ━━━━━━━━━━━━━━━ ━━━━━ ━━━━━━━━━━━━━━━━━━━━━━━━━━━━  ━━━━┛
      ↑               ↑
      │               │
       знак порядка    знак мантиссы
      32   31   .....  1     64  63       .......             1
    ┏━━━━│━━━ ━━━━━━━━━━┓  ┏━━━━│━━━━━━━━━━━━━━━━━━━━━━ ━  ━━━━┓
    ┃    │
                        ┃  ┃    │                              ┃
в). ┃знак│   ч и с л о  ┃  ┃знак│         ч и с л о            ┃
         │                      │
    ┗━━━━━━ ━━━━━━━━━━━━┛  ┗━━━━━━━━━━━━━━━━━━━━━━━━ ━━━━  ━━━━┛
     32   ...   29 28   ...  21 20        .........           1
    ┏━━ ━━━━━━ ━━━│━━━ ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━  ━━━━┓
    ┃             │            │                               ┃
г). ┃мо дифика тор│    к о п   │           а д р е с           ┃
                  │            │
    ┗━━ ━━━━━━ ━━━━━━━ ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━  ━━━━┛
     32   ...   29 28   ...  21 20  ...  13 12    .....       1
    ┏━━ ━━━━━━ ━━━│━━━ ━━━━━━━━━━━━━━━━━━━━│━━━━━━━━━━━━━  ━━━━┓
    ┃             │            │           │                   ┃
д). ┃мо дифика тор│     3F     │   к о п   │    а д р е с      ┃
                  │            │           │
    ┗━━ ━━━━━━ ━━━━━━━ ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━  ━━━━┛
          а).Общий формат данных.
          б).Представление чисел с плавающей запятой.
          в).Представление целых 64 и 32-разрядных чисел.
          г).Команды основного формата.
          д).Команды дополнительного формата.







                    ┌─ ──── ──┐     ┌─ ───── ─┐
                    │         │     │         │
                    │с танд ар│     │  ППЗУ   │
                    │         │     │         │
                    │т изат ор│     │  конс-  │
                    │         │     │         │
                    │к оман д │     │  тант   │
                    └─ ──┬─ ──┘     └─ ──┬── ─┘
                         │               │
 ши на  D
                         ↓               ↓
╶── ─── ─── ─────────────────── ──── ───── ────── ───── ───── ──── ──
╶── ─── ─── ─────────────────── ──── ───── ────── ───── ───── ──── ──
     ↑           │          ↑           ↑           ↑           ↑
     │           │          │           │           │           │
                            │           │           │           │
     ↓           ↓
┌── ─── ──┐ ┌─ ──────┐ ┌─ ───── ─┐ ┌ ───── ──┐ ┌─ ───── ─┐ ┌─ ──── ──┐
│         │ │        │ │         │ │         │ │         │ │         │
│   БОИ   │ │А ЛУ,ре-│ │м одифи -│ │  сдви - │ │  поиск  │ │у чет  ак│
│         │ │        │ │         │ │         │ │         │ │         │
│да нны х │ │        │ │         │ │         │ │  левой  │ │т ивно с-│
│         │ │г истры │ │к аторы  │ │ гател ь │ │         │ │         │
│         │ │        │ │         │ │         │ │е диниц ы│ │т и ст р.│
└── ─── ──┘ └─ ──┬───┘ └─ ───── ─┘ └ ───── ──┘ └─ ───── ─┘ └─ ──── ──┘
     ↑           │          ↑           ↑           ↑           ↑
     │           │          │           │           │           │
                            │           │           │           │
     ↓           ↓
╶── ─── ─── ───────────── ───── ──── ───── ────── ───── ────────── ──
╶── ─── ─── ───────────── ───── ──── ──────────── ───── ──────── ── ─
             ↑              ↑              ↑              │
 ши на  Y    │              │              │              │
        ┌── ─↓─ ──┐    ┌─ ──↓─ ──┐    ┌─ ──↓─ ──┐    ┌ ───↓── ─┐
        │         │    │         │    │         │    │         │
        │         │    │п рипи с-│    │  блок   │    │ остано в│
        │   БОИ   │    │         │    │         │    │         │
        │         │    │   ка    │    │  связ и │    │    по   │
        │   тег а │    │         │    │         │    │         │
        │         │    │а дрес а │    │  с ПП   │    │ адресу  │
        └── ─── ──┘    └─ ──── ──┘    └─ ──── ──┘    └ ────── ─┘
          Основные функциональнве блоки ЦП уровня микромашины.





                                                                   

                        ┌──── ────── ─────┐
                        │                 │
                        │ ини циализ ация │
                        └──── ───┬── ─────┘
                                 │
                                 │←─ ───────  ───────────↑
                                                         │
                        ┌──── ───↓── ─────┐              │
                        │ выб орка к оман-│              │
                        │                 │              │
                        │  дн ого сл ова  │              │
                                                         │
                        └──── ───┬── ─────┘              │
                                 │                       │
                                 ↓                       │
                           ╌╌ ╌╌╌╌╌╌ ╌╌╌╌                │
                          ╎              ╎               │
                          ╎ п рерыва ния ╎               │
                                                         │
                           ╌╌ ╌╌╌╌╌╌ ╌╌╌╌                │
                                  │                      │
           ┌────── ─────────── ──→│                      │
           │                                             │
           │               ╶── ───↓── ────               │
           │              /               \              │
           │                 п равая  или                │
           │           ←╴/                 \╶→           │
           │           │ \ лев ая ком анда?/ │           │
           │           │                     │           │
           │     л евая│  \               /  │пра вая    │
           │           │   ╶── ────── ───╴   │           │
           │           │                     │           │
           │                                             │
           │  ┌─── ────↓────── ─┐   ┌ ───────↓─── ────┐  │
           │  │    выполнение   │   │    выполнен ие  │  │
           │  │                 │   │                 │  │
           │  │ ле вой команды  │   │  правой ком анды│  │
           │                                             │
           │  └─── ────┬────── ─┘   └ ───────┬─── ────┘  │
           │                                             │
           │           ↓                     ↓           │
           │ ┌──── ─────────── ─┐   ┌ ─────────── ─────┐ │
           │ │                  │   │                  │ │
           │ │  ус тановка ППК  │   │ сброс ППК,С ЧАС+1│ │
           │                                             │
           │ └──── ────┬────── ─┘   └ ───────┬─── ─────┘ │
           │                                             │
           │           ↓                     ↓           │
           │     ╌ ╌╌╌╌╌╌╌╌ ╌╌╌        ╌╌╌ ╌╌╌╌╌╌ ╌╌╌    │
           │    ╎              ╎      ╎              ╎   │
            ←───╎  прерывания  ╎      ╎ пр ерыван ия ╎╶─→
                 ╌ ╌╌╌╌╌╌╌╌ ╌╌╌         ╌╌╌╌╌╌╌╌╌ ╌╌╌
                  Схема исполнения команды в МКБ-8601.







     64 63   ....    54 53 52       . . . . . .  . . . .      1
     ┏━━━━━ ━━━━━━━ ━━━━━━━━━━ ━━━━━━━━━━━━━━━━━ ━━━━━━━━━━━━━━┓
     ┃ │               │ │                                     ┃
     ┃ │    порядок    │ │          м а н т и с  с а           ┃
     ┗━━━━━ ━━━━━━━ ━━━━━━━━━━ ━━━━━━━━━━━━━━━━━ ━━━━━━━━━━━━━━┛
      │                 │
      ↓                 ↓
а).  знак п орядка     знак ма нтиссы
      ↑                 ↑
      │                 │
     ┏━━━━━ ━━━━━━━ ━━━━━━━━━━ ━━━━━━━━━━━━━━━━━ ━━━━━━━━━━━━━━┓
     ┃ │      │        │ │                          │          ┃
     ┃ │xxx xx│поря док│ │      м а н т и с с а     │xxxxxxxxxx┃
     ┗━━━━━ ━━━━━━━ ━━━━━━━━━━ ━━━━━━━━━━━━━━━━━ ━━━━━━━━━━━━━━┛
     64 63  60 59    54 53 52                     1  12       1
     64 63. .60 59     ...      37 36    ...      13 12  ...  1
     ┏━━│━━ ━━━│━━━ ━━━━━━━━━━ ━━━│━━━━━━━━━━━━━ ━━━━│━━━━━━━━━┓
     ┃  │      │                  │                  │         ┃
б).  ┃ле│xx xxx│  в ая команда    │ правая коман да  │xxxxxxxxx┃
     ┃  │      │                  │                  │         ┃
     ┗━━━━━ ━━━━━━━ ━━━━━━━━━━ ━━━━━━━━━━━━━━━━━ ━━━━━━━━━━━━━━┛
          а).Представление чисел с плавающей запятой в РЭ.
          б).Формат команд эмулятора БЭСМ-6.





┌──────────────────────┬──────┬──────────────────────┬──────┐
│                      │      │                      │число │
│                      │число │                      │      │
│    операция БЭСМ-6   │      │   операция МКБ-8601  │микро-│
│                      │команд│                      │      │
│                      │      │                      │команд│
│                      │      │                      │      │
┌──────────────────────┬──────┬──────────────────────┬──────┐
│                      │      │                      │      │
│"малое упрятывание"для│  13  │микропрограмма входа в│  90  │
│                      │      │                      │      │
│минимальной обработки │      │прерывание, включающая│      │
│                      │      │                      │ (40) │
│прерываний            │      │полное упрятывание    │      │
│                      │      │                      │      │
│                      │      │регистров и запись    │      │
│                      │      │                      │      │
│полное упрятывание    │  25  │информации о прерваном│      │
│                      │      │                      │      │
│регистров при         │      │процессе в регистры   │      │
│                      │      │                      │      │
│прерываниях           │      │процесса обработки    │      │
│                      │      │                      │      │
│                      │      │прерывания            │      │
│                      │      │                      │      │
│уточнение места       │10-15 │                      │      │
│                      │      │                      │      │
│прерывания            │      │                      │      │
│                      │      │                      │      │
┌──────────────────────┬──────┬──────────────────────┬──────┐
│                      │      │                      │      │
│"малое" восстановление│  13  │возврат из прерывания │  66  │
│                      │      │                      │      │
│регистров после       │      │с полным восстановле- │ (43) │
│                      │      │                      │      │
│прерывания            │      │нием содержимого      │      │
│                      │      │                      │      │
│                      │      │регистров             │      │
│                      │      │                      │      │
│полное восстановление │  25  │                      │      │
│                      │      │                      │      │
│регистров после       │      │                      │      │
│                      │      │                      │      │
│прерывания            │      │                      │      │
│                      │      │                      │      │
┌──────────────────────┬──────┬──────────────────────┬──────┐
│                      │      │                      │      │
│"малое упрятывание"для│  13  │микропрограмма входа в│  57  │
│                      │      │                      │      │
│экстракода            │      │экстракод с передачей │      │
│                      │      │                      │      │
│                      │      │полной информации о   │      │
│                      │      │                      │      │
│                      │      │процессе, вызвавшем   │      │
│                      │      │                      │      │
│                      │      │экстракод             │      │
│                      │      │                      │      │
┌──────────────────────┬──────┬──────────────────────┬──────┐
│                      │      │                      │      │
│восстановление        │  13  │команда возврата из   │  14  │
│                      │      │                      │      │
│регистров после       │      │экстракода            │      │
│                      │      │                      │      │
│экстракода            │      │                      │      │
│                      │      │                      │      │
┌──────────────────────┬──────┬──────────────────────┬──────┐
│                      │      │                      │      │
│смена процессов       │ 116  │смена процессов       │ 156  │
│                      │      │                      │      │
│в том числе:          │      │в том числе:          │      │
│                      │      │                      │      │
│-упрятывание регистров│  25  │-микропрограмма входа │  90  │
│                      │      │                      │      │
│ прерванного процесса │      │ в прерывание         │      │
│                      │      │                      │      │
│-восстановление       │  66  │-возврат из прерывания│  66  │
│                      │      │                      │      │
│ регистров приписки   │      │                      │      │
│                      │      │                      │      │
│-восстановление регис-│  25  │                      │      │
│                      │      │                      │      │
│ тров нового процесса │      │                      │      │
│                      │      │                      │      │
┌──────────────────────┬──────┬──────────────────────┬──────┐
│                      │      │                      │      │
│учет обращения к одной│ 160  │учет обращения к одной│  19  │
│                      │      │                      │      │
│странице памяти       │      │странице памяти       │      │
│                      │      │                      │      │
│в том числе:          │      │                      │      │
│                      │      │                      │      │
│-упрятывание и восста-│  60  │                      │      │
│                      │      │                      │      │
│ новление регистров   │      │                      │      │
│                      │      │                      │      │
│-коррекция списка, сня│ 100  │                      │      │
│                      │      │                      │      │
│ тие защиты страницы  │      │                      │      │
│                      │      │                      │      │
╶───────────────────────────────────────────────────────────╴
   Табл.1. Выполнение некоторых операций в БЭСМ-6 и МКБ-8601.




